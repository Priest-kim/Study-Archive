# 리팩토링 접근 방식과 핵심 팁

## 1. 역할 놀이를 통한 코드 분석

복잡한 코드를 처음 마주했을 때, 가장 먼저 드는 생각은 "이 코드를 어떻게 효과적으로 나눌 수 있을까?" 입니다. 이때 매우 유용한 방법이 "역할 놀이" 접근법입니다.

예를 들어, 리뷰 시스템을 리팩토링할 때 다음과 같은 역할들을 상상해볼 수 있습니다:

- "나는 리뷰 검증 담당자입니다"
- "나는 권한 확인 담당자입니다"
- "나는 데이터 일관성 담당자입니다"

이렇게 각 부분의 역할을 명확히 구분하면서 코드를 바라보면, 자연스럽게 책임의 분리가 이루어지게 됩니다.

## 2. 비즈니스 규칙 발견하기

코드를 분석할 때 특별히 주의 깊게 봐야 할 부분이 바로 조건문(`if`)입니다. 조건문 안에 담긴 내용은 대부분 중요한 비즈니스 규칙인 경우가 많기 때문입니다.

### 예시

```javascript
if (review.content.length < 10) {
  return { success: false, message: '리뷰는 최소 10자 이상 작성해야 합니다.' };
}
```

이러한 조건을 발견하면, 다음과 같이 상수로 분리할 수 있습니다:

```javascript
const REVIEW_RULES = {
  MIN_LENGTH: 10,
  MAX_LENGTH: 1000,
};
```

## 3. 반복 패턴 식별하기

코드 내에서 반복되는 패턴을 찾아내는 것은 리팩토링의 중요한 부분입니다. 이러한 패턴은 보통 공통된 비즈니스 요구사항을 나타냅니다.

### 패턴의 예시

리뷰 시스템에서 create, update, delete 작업 후에 항상 호출되는 `updateProductRating` 함수를 발견했다면, 이는 다음과 같은 비즈니스 규칙을 의미합니다:

> "모든 리뷰 변경 작업 후에는 반드시 상품의 평균 평점이 업데이트되어야 한다"

이러한 패턴은 다음과 같이 리팩토링될 수 있습니다:

```javascript
function handleReviewChange(review, action) {
  try {
    // 리뷰 관련 작업 수행
    const result = performReviewAction(review, action);

    // 항상 평점 업데이트 실행
    updateProductRating(review.productId);

    return result;
  } catch (error) {
    // 에러 처리
  }
}
```

## 핵심 포인트 요약

- 코드의 각 부분이 담당하는 역할을 명확히 구분하기
- 조건문을 통해 비즈니스 규칙 발견하기
- 반복되는 패턴을 찾아 공통 로직으로 분리하기
- 점진적인 리팩토링을 통해 코드의 품질 향상시키기

이러한 접근 방식들을 통해 더 유지보수하기 쉽고, 이해하기 쉬운 코드를 만들 수 있습니다.
